From 34c48117bb8630f1bd836a610518bcb57caf19c1 Mon Sep 17 00:00:00 2001
From: blkart <blkart.org@gmail.com>
Date: Fri, 20 Nov 2015 16:38:30 +0800
Subject: [PATCH] output log to cinder-all log file LMA monitor platform need
 get HTTP response infomation from cinder-all.log

Signed-off-by: blkart <blkart.org@gmail.com>
---
 cinder/openstack/common/log.py | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

diff --git a/cinder/openstack/common/log.py b/cinder/openstack/common/log.py
index f325925..bd1d29f 100644
--- a/cinder/openstack/common/log.py
+++ b/cinder/openstack/common/log.py
@@ -549,9 +549,11 @@ def _setup_logging_from_conf(project, version):
             # TODO(bogdando) use the format provided by RFCSysLogHandler
             #   after existing syslog format deprecation in J
             if CONF.use_syslog_rfc_format:
-                syslog = RFCSysLogHandler(facility=facility)
+                syslog = RFCSysLogHandler(address='/dev/log',
+                                        facility=facility)
             else:
-                syslog = logging.handlers.SysLogHandler(facility=facility)
+                syslog = logging.handlers.SysLogHandler(address='/dev/log',
+                                                        facility=facility)
             log_root.addHandler(syslog)
         except socket.error:
             log_root.error('Unable to add syslog handler. Verify that syslog'
-- 
1.8.3.1

